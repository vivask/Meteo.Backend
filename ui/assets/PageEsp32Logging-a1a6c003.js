import{a as u,Q as _}from"./QTable-f6f16d1c.js";import{U as b}from"./UiBox-438aefea.js";import{u as h}from"./useConfirmDialog-7754cf44.js";import{u as v}from"./useUtils-85085a27.js";import{j as w}from"./jwtClient-fdc6c2bb.js";import{_ as y,a as C}from"./index-dc2fb6bd.js";import{K as x,r as f,aW as k,aV as L,o as T,f as D,L as s,g as A,M as l,a8 as c,Y as m,a7 as g}from"./vendor-7e3b54f2.js";import"./QMenu-7e13e904.js";import"./QTooltip-cd4ef32e.js";import"./QMarkupTable-3806441a.js";import"./QChip-dc1c4db6.js";import"./QItemLabel-0efd9dc5.js";import"./QItemSection-cefe5148.js";import"./format-3895543d.js";import"./NetworkError-b28af479.js";async function E(){const e={};return w.get("/esp32/logging").then(({success:o,result:r})=>o?r:e).catch(()=>e)}async function I(e){w.put("/esp32/logging").then(({success:o})=>{o&&(e.value=[])})}const V=[{name:"date",align:"left",label:"Date"},{name:"time",align:"left",label:"Time"},{name:"message",align:"left",label:"Message"}],$=x({name:"PageEsp32Logging",components:{UiBoxVue:b},setup(){let e;const o=f([]),r={xl:9,lg:9,md:7,sm:11,xs:10},{shortDate:p,shortTime:d}=v(),i=h(),a=f(!0),t=C();return k(()=>{e=setInterval(()=>{t.loggedIn&&a.value&&(a.value=!1,E().then(n=>{o.value=n,a.value=!0}).catch(()=>a.value=!0))},1e3)}),L(()=>clearTimeout(e)),{columns:V,rows:o,confirm:i,boxCols:r,shortDate:p,shortTime:d,async handleClear(){await i.show("Are you sure you want to clear logging?")&&I(o)},logColor(n){switch(n){case"I":return"text-subtitle1 text-positive";case"W":return"text-subtitle1 text-warning";case"E":return"text-subtitle1 text-negative";default:return"text-subtitle1 text-grey"}}}}});function B(e,o,r,p,d,i){const a=A("ui-box-vue");return T(),D(a,{columns:e.boxCols,header:"Message log",buttonShow:!0,buttonLabel:"Clear",buttonClick:e.handleClear},{default:s(()=>[l(_,{dense:"",rows:e.rows,columns:e.columns,"row-key":"date","rows-per-page-options":[10,50,100,0]},{"body-cell-date":s(t=>[l(u,{props:t,class:c(["wd-80",e.logColor(t.row.type)])},{default:s(()=>[m(g(e.shortDate(t.row.date_time)),1)]),_:2},1032,["props","class"])]),"body-cell-time":s(t=>[l(u,{props:t,class:c(["wd-70",e.logColor(t.row.type)])},{default:s(()=>[m(g(e.shortTime(t.row.date_time)),1)]),_:2},1032,["props","class"])]),"body-cell-message":s(t=>[l(u,{props:t,class:c(e.logColor(t.row.type))},{default:s(()=>[m(g(t.row.message),1)]),_:2},1032,["props","class"])]),_:1},8,["rows","columns"])]),_:1},8,["columns","buttonClick"])}const J=y($,[["render",B],["__scopeId","data-v-d7c707f2"]]);export{J as default};
