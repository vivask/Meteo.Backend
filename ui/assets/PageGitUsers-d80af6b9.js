import{K as S,r as d,k,N as E,g as f,o as h,f as U,L as n,M as o,aT as G,b0 as T,b2 as A,S as _,aS as B,b3 as I,c as L,aW as F,O as y,X as C,R as N,a6 as g,aQ as v,a7 as b}from"./vendor-7e3b54f2.js";import{b as R,Q as M,a as w}from"./QTable-f6f16d1c.js";import{U as z}from"./UiBox-438aefea.js";import{U as K}from"./UiRoundBtn-7ea8dd22.js";import{u as O}from"./useTableHandlers-649b36f2.js";import{Q as W}from"./QForm-dd93a313.js";import{U as q}from"./UiInput-ff5536f7.js";import{U as H}from"./UiPasswordInput-8bf8e294.js";import{u as X}from"./useSubmitForm-841c2b76.js";import{g as j}from"./formsApi-edff0b5e.js";import{_ as V}from"./index-dc2fb6bd.js";import{u as J}from"./useUtils-85085a27.js";import{t as Y}from"./tableWrapper-c43f1a46.js";import"./QMenu-7e13e904.js";import"./QTooltip-cd4ef32e.js";import"./QMarkupTable-3806441a.js";import"./QChip-dc1c4db6.js";import"./QItemLabel-0efd9dc5.js";import"./QItemSection-cefe5148.js";import"./format-3895543d.js";import"./useConfirmDialog-7754cf44.js";import"./jwtClient-fdc6c2bb.js";import"./NetworkError-b28af479.js";const Z=S({name:"FormGitUser",components:{UiInputVue:q,UiPasswordInputVue:H},emits:["cancel","submit"],setup(e,{emit:s}){const i=d(null),p=d([]),u=d(null),m=d(null),{localProp:l,show:r,handleSubmit:a,handleCancel:t}=X(i,s);return k(async()=>p.value=await j()),{localProp:l,popup:i,ssh_keys:p,confirm:u,input:m,show(c){u.value=c.password,r(c)},handleSubmit:a,handleCancel:t,onSubmit(){l.value.password!=u.value?(E.create({timeout:{}.ERROR_TIMEOUT,type:"negative",message:"Passwords do not match!"}),m.value.focus()):a()}}}});function x(e,s,i,p,u,m){const l=f("ui-input-vue"),r=f("ui-password-input-vue");return h(),U(I,{ref:"popup","transition-show":"rotate","transition-hide":"rotate",persistent:""},{default:n(()=>[o(B,{style:{"min-width":"350px"}},{default:n(()=>[o(G,null,{default:n(()=>[o(W,{class:"q-gutter-md",autocomplete:"off",onSubmit:T(e.handleSubmit,["prevent"])},{default:n(()=>[o(R,{modelValue:e.localProp.ssh_key,"onUpdate:modelValue":s[0]||(s[0]=a=>e.localProp.ssh_key=a),outlined:"",dense:"",options:e.ssh_keys,"option-label":"owner",hint:"Service *","lazy-rules":"",rules:[a=>a||"Please select something"]},null,8,["modelValue","options","rules"]),o(l,{modelValue:e.localProp.username,"onUpdate:modelValue":s[1]||(s[1]=a=>e.localProp.username=a),type:"text",hint:"User name *"},null,8,["modelValue"]),o(r,{modelValue:e.localProp.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.localProp.password=a),hint:"Password *"},null,8,["modelValue"]),o(r,{ref:"input",modelValue:e.confirm,"onUpdate:modelValue":s[3]||(s[3]=a=>e.confirm=a),hint:"Confirm password *"},null,8,["modelValue"]),o(A,{align:"left",class:"text-primary"},{default:n(()=>[o(_,{label:"Submit",type:"submit",color:"primary"}),o(_,{label:"Cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:e.handleCancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},512)}const ee=V(Z,[["render",x]]),oe="/sshclient/gitusers";function te(e){return Y(oe,e)}const se=[{name:"state"},{name:"icon"},{name:"user"},{name:"actions"}],ae=S({name:"PageGitUsers",components:{UiBoxVue:z,UiRoundBtnVue:K,FormGitUserVue:ee},setup(){const e=d([]),s=te(e),i=d(null),p={xl:5,lg:5,md:7,sm:11,xs:10},u=L(()=>e.value.length===0),m=d(!1),{handleAdd:l,handleEdit:r,handleSubmit:a,handleDelete:t,handleCancel:c}=O(m,i,e,s,{}),{formatLongDate:P,isEmptyTime:Q,activeIcon:$,activeColor:D}=J();return k(async()=>e.value=await s.Get(!0)),F(async()=>e.value=await s.Get(!1)),{columns:se,rows:e,buttonShow:u,wrapper:s,form:i,boxCols:p,visible:m,formatLongDate:P,isEmptyTime:Q,activeIcon:$,activeColor:D,handleAdd:l,handleEdit:r,handleSubmit:a,handleDelete:t,handleCancel:c}}}),ne={class:"text-subtitle1 text-bold text-left text-primary"},le={class:"text-subtitle2 text-left"},re={class:"text-meta text-left"},ie={key:0,class:"text-meta text-left"};function ue(e,s,i,p,u,m){const l=f("ui-round-btn-vue"),r=f("ui-box-vue"),a=f("form-git-user-vue");return h(),y(N,null,[o(r,{columns:e.boxCols,header:"Git users management",buttonShow:e.buttonShow,buttonLabel:"Add",buttonClick:e.handleAdd,tooltip:"Add new git user"},{default:n(()=>[o(M,{"hide-header":"",rows:e.rows,columns:e.columns,"row-key":"name","rows-per-page-options":[10,50,100,0]},{"body-cell-state":n(t=>[o(w,{props:t,class:"wd-20"},{default:n(()=>[o(g,{name:e.activeIcon(t.row),size:"1.2rem",color:e.activeColor(t.row)},null,8,["name","color"])]),_:2},1032,["props"])]),"body-cell-icon":n(t=>[o(w,{props:t,class:"wd-80"},{default:n(()=>[o(g,{name:"mdi-account",size:"md"})]),_:2},1032,["props"])]),"body-cell-user":n(t=>[o(w,{props:t,class:"wd-100"},{default:n(()=>[v("div",ne,b(t.row.username),1),v("div",le,"Key: "+b(t.row.ssh_key.owner),1),v("div",re,"Created "+b(e.formatLongDate(t.row.created)),1),e.isEmptyTime(t.row.used)?(h(),y("div",ie," Last used "+b(e.formatLongDate(t.row.used)),1)):C("",!0)]),_:2},1032,["props"])]),"body-cell-actions":n(t=>[o(w,{props:t},{default:n(()=>[o(l,{color:"primary",icon:"add",tooltip:"Create git user",onClick:e.handleAdd},null,8,["onClick"]),o(l,{color:"positive",icon:"mode_edit",tooltip:"Edit git user",onClick:c=>e.handleEdit(t.row)},null,8,["onClick"]),o(l,{color:"negative",icon:"delete",tooltip:"Delete git user",onClick:c=>e.handleDelete(t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1},8,["columns","buttonShow","buttonClick"]),e.visible?(h(),U(a,{key:0,ref:"form",onSubmit:e.handleSubmit,onCancel:e.handleCancel},null,8,["onSubmit","onCancel"])):C("",!0)],64)}const Te=V(ae,[["render",ue],["__scopeId","data-v-29f91732"]]);export{Te as default};
