import{K as b,V as A,r as p,w as C,o as y,O as B,M as c,L as i,b7 as r,a8 as x,R as P,k as $,f as S,g as v}from"./vendor-7e3b54f2.js";import{Q as s}from"./QItemLabel-0efd9dc5.js";import{_ as g}from"./index-dc2fb6bd.js";import{U as q}from"./UiBox-438aefea.js";import{j as h}from"./jwtClient-fdc6c2bb.js";import"./QTooltip-cd4ef32e.js";import"./NetworkError-b28af479.js";const _=b({name:"ProxyServer",props:{modelValue:{type:Object,required:!0},title:{type:String,required:!0},line:{type:Boolean,default:!1},onActive:{type:Function,required:!0},onAdblock:{type:Function,required:!0},onCache:{type:Function,required:!0},onUnlock:{type:Function,required:!0}},emits:["update:modelValue"],setup(e,{emit:o}){const{modelValue:a}=A(e),n=p(null);return C(a,t=>{n.value={...t}},{immediate:!0}),{localModel:n,handleActive(){o("update:modelValue",{...n.value}),e.onActive()},handleAdblock(){o("update:modelValue",{...n.value}),e.onAdblock()},handleCache(){o("update:modelValue",{...n.value}),e.onCache()},handleUnlock(){o("update:modelValue",{...n.value}),e.onUnlock()}}}});function w(e,o,a,n,t,k){return y(),B(P,null,[c(s,{dense:""},{default:i(()=>[c(r,{modelValue:e.localModel.active,"onUpdate:modelValue":[o[0]||(o[0]=l=>e.localModel.active=l),e.handleActive],label:e.title,"checked-icon":"dns","unchecked-icon":"dns"},null,8,["modelValue","label","onUpdate:modelValue"])]),_:1}),c(s,{dense:""},{default:i(()=>[c(r,{modelValue:e.localModel.adblock,"onUpdate:modelValue":[o[1]||(o[1]=l=>e.localModel.adblock=l),e.handleAdblock],label:"Ad blocking","checked-icon":"task_alt","unchecked-icon":"highlight_off",class:"ml-30"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),c(s,{dense:""},{default:i(()=>[c(r,{modelValue:e.localModel.cache,"onUpdate:modelValue":[o[2]||(o[2]=l=>e.localModel.cache=l),e.handleCache],label:"Cache","checked-icon":"task_alt","unchecked-icon":"highlight_off",class:"ml-30"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),c(s,{dense:"",class:x({"bottom-line":e.line})},{default:i(()=>[c(r,{modelValue:e.localModel.unlock,"onUpdate:modelValue":[o[3]||(o[3]=l=>e.localModel.unlock=l),e.handleUnlock],label:"Website unblocking","checked-icon":"task_alt","unchecked-icon":"highlight_off",class:"ml-30"},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["class"])],64)}const F=g(_,[["render",w],["__scopeId","data-v-efa86923"]]);async function j(){const e={main:null,backup:null};return h.get("/proxy/status").then(({success:o,result:a})=>o?{main:a[0].main?a[0]:a[1],backup:a[0].main?a[1]:a[0]}:e).catch(()=>e)}const u=(e,o,a)=>{e?h.put(o):h.put(a)};function Q(e){u(e,"/proxy/main/server/start","/proxy/main/server/stop")}function I(e){u(e,"/proxy/main/adblock/on","/proxy/main/adblock/off")}function O(e){u(e,"/proxy/main/cache/on","/proxy/main/cache/off")}function R(e){u(e,"/proxy/main/unlock/on","/proxy/main/unlock/off")}function z(e){u(e,"/proxy/backup/server/start","/proxy/backup/server/stop")}function E(e){u(e,"/proxy/backup/adblock/on","/proxy/backup/adblock/off")}function K(e){u(e,"/proxy/backup/cache/on","/proxy/backup/cache/off")}function L(e){u(e,"/proxy/backup/unlock/on","/proxy/backup/unlock/off")}const N=b({name:"PageProxy",components:{ProxyServerVue:F,UiBoxVue:q},setup(){const e=p({}),o=p({}),a=p(!0),n={xl:3,lg:3,md:4,sm:11,xs:10},t=()=>Q(e.value.active),k=()=>I(e.value.adblock),l=()=>O(e.value.cache),m=()=>R(e.value.unlock),d=()=>z(o.value.active),V=()=>E(o.value.adblock),M=()=>K(o.value.cache),U=()=>L(o.value.unlock);return $(async()=>{const f=await j();e.value=f.main,o.value=f.backup}),{spinner:a,main:e,backup:o,boxCols:n,handleActiveMain:t,handleAdblockMain:k,handleCacheMain:l,handleUnlockMain:m,handleActiveBackup:d,handleAdblockBackup:V,handleCacheBackup:M,handleUnlockBackup:U}}});function W(e,o,a,n,t,k){const l=v("proxy-server-vue"),m=v("ui-box-vue");return y(),S(m,{columns:e.boxCols,header:"Proxy Servers"},{default:i(()=>[c(l,{modelValue:e.main,"onUpdate:modelValue":o[0]||(o[0]=d=>e.main=d),line:!0,title:"Main server","on-active":e.handleActiveMain,"on-adblock":e.handleAdblockMain,"on-cache":e.handleCacheMain,"on-unlock":e.handleUnlockMain},null,8,["modelValue","on-active","on-adblock","on-cache","on-unlock"]),c(l,{modelValue:e.backup,"onUpdate:modelValue":o[1]||(o[1]=d=>e.backup=d),title:"Backup server","on-active":e.handleActiveBackup,"on-adblock":e.handleAdblockBackup,"on-cache":e.handleCacheBackup,"on-unlock":e.handleUnlockBackup},null,8,["modelValue","on-active","on-adblock","on-cache","on-unlock"])]),_:1},8,["columns"])}const Z=g(N,[["render",W]]);export{Z as default};
