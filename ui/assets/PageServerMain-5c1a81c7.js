import{Q as q}from"./QMarkupTable-3806441a.js";import{U as B}from"./UiBox-438aefea.js";import{U as w,D as T,S as P}from"./ServerReboot-d6d987f6.js";import{U as M}from"./UiSquareBtn-3d095194.js";import{j as b}from"./jwtClient-fdc6c2bb.js";import{_ as C,a as U}from"./index-dc2fb6bd.js";import{K as _,g as u,o as y,f,L as $,M as o,c as A,r as k,aW as j,aV as N,aQ as W,O as E,P as G,R as D}from"./vendor-7e3b54f2.js";import"./QItemLabel-0efd9dc5.js";import"./QTooltip-cd4ef32e.js";import"./NetworkError-b28af479.js";async function J(){const e=[];try{const{success:t,result:a}=await b.get("/main/state");return t?a:e}catch{return e}}async function Q(e){const t=`/media/transmission/jobs/${e}`;try{const{success:a}=await b.put(t);return a}catch{return!1}}async function h(e,t){const a=`/media/${e}/${t}`;try{const{success:p}=await b.put(a);return p}catch{return!1}}async function n(e){const t=`/main/restart/${e}`;try{const{success:a}=await b.put(t);return a}catch{return!1}}async function i(e){const t=`/main/stop/${e}`;try{const{success:a}=await b.put(t);return a}catch{return!1}}async function l(e){const t=`/main/start/${e}`;try{const{success:a}=await b.put(t);return a}catch{return!1}}async function I(){try{const{success:e}=await b.put("/main/reboot");return e}catch{return!1}}async function F(){try{const{success:e}=await b.put("/main/shutdown");return e}catch{return!1}}async function v(e){const t=[],a=`/main/logging/${e}`;try{const{success:p,result:d}=await b.get(a);return p?d:t}catch{return t}}async function c(e){const t=`/main/logging/${e}`;try{const{success:a}=await b.put(t);return a}catch{return!1}}const K=_({name:"MainTransmission",components:{UiRowContainerVue:w,UiSquareBtnVue:M},props:{disable:{type:Boolean,required:!0}},setup(){return{TransmissionJobs:Q,MediaService:h}}});function O(e,t,a,p,d,S){const s=u("ui-square-btn-vue"),g=u("ui-row-container-vue");return y(),f(g,{title:"Transmission",healthy:!e.disable},{default:$(()=>[o(s,{disable:e.disable,tooltip:"Run transmission jobs",color:"primary",icon:"mdi-play",onClick:t[0]||(t[0]=r=>e.TransmissionJobs("start"))},null,8,["disable"]),o(s,{disable:e.disable,tooltip:"Stop transmission jobs",color:"primary",icon:"mdi-pause",onClick:t[1]||(t[1]=r=>e.TransmissionJobs("stop"))},null,8,["disable"]),o(s,{tooltip:"Restart transmission daemon",color:"primary",icon:"mdi-restart",onClick:t[2]||(t[2]=r=>e.MediaService("transmission","restart"))}),o(s,{disable:e.disable,tooltip:"Stop transmission daemon",color:"warning",icon:"mdi-stop",onClick:t[3]||(t[3]=r=>e.MediaService("transmission","stop"))},null,8,["disable"]),o(s,{disable:!e.disable,tooltip:"Start transmission daemon",color:"primary",icon:"start",onClick:t[4]||(t[4]=r=>e.MediaService("transmission","start"))},null,8,["disable"])]),_:1},8,["healthy"])}const z=C(K,[["render",O]]),H=_({name:"MainSamba",components:{UiRowContainerVue:w,UiSquareBtnVue:M},props:{disable:{type:Boolean,required:!0}},setup(){return{MediaService:h}}});function X(e,t,a,p,d,S){const s=u("ui-square-btn-vue"),g=u("ui-row-container-vue");return y(),f(g,{title:"Samba",healthy:!e.disable},{default:$(()=>[o(s,{disable:e.disable,tooltip:"Restart samba daemon",color:"primary",icon:"mdi-restart",onClick:t[0]||(t[0]=r=>e.MediaService("restart"))},null,8,["disable"]),o(s,{disable:e.disable,tooltip:"Stop samba daemon",color:"warning",icon:"mdi-stop",onClick:t[1]||(t[1]=r=>e.MediaService("stop"))},null,8,["disable"]),o(s,{disable:!e.disable,tooltip:"Start samba daemon",color:"primary",icon:"start",onClick:t[2]||(t[2]=r=>e.MediaService("start"))},null,8,["disable"])]),_:1},8,["healthy"])}const Y=C(H,[["render",X]]),Z=_({name:"MainStorage",components:{UiRowContainerVue:w,UiSquareBtnVue:M},props:{disable:{type:Boolean,default:!1}},setup(){return{MediaService:h}}});function x(e,t,a,p,d,S){const s=u("ui-square-btn-vue"),g=u("ui-row-container-vue");return y(),f(g,{title:"Storage",healthy:!e.disable},{default:$(()=>[o(s,{disable:e.disable,tooltip:"Remount storage",color:"primary",icon:"mdi-restart",onClick:t[0]||(t[0]=r=>e.MediaService("storage","remount"))},null,8,["disable"]),o(s,{disable:e.disable,tooltip:"Umount storage",color:"warning",icon:"link_off",onClick:t[1]||(t[1]=r=>e.MediaService("storage","umount"))},null,8,["disable"]),o(s,{disable:!e.disable,tooltip:"Mount storage",color:"primary",icon:"link",onClick:t[2]||(t[2]=r=>e.MediaService("storage","mount"))},null,8,["disable"])]),_:1},8,["healthy"])}const ee=C(Z,[["render",x]]);function te(e){return A(()=>[{title:"Cluster",value:"cluster",disable:!e.value.ClusterService,empty:e.value.ClusterLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Proxy",value:"proxy",disable:!e.value.ProxyService,empty:e.value.ProxyLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Web",value:"web",disable:!e.value.WebService,empty:e.value.WebLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Esp32",value:"esp32",disable:!e.value.Esp32Service,empty:e.value.Esp32Log,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Sshclient",value:"sshclient",disable:!e.value.SshclientService,empty:e.value.SshclientLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Schedule",value:"schedule",disable:!e.value.ScheduleService,empty:e.value.ScheduleLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Messanger",value:"messanger",disable:!e.value.MessangerService,empty:e.value.MessangerLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Radius",value:"radius",disable:!e.value.RadiusService,empty:e.value.RadiusLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Media",value:"media",disable:!e.value.MediaService,empty:e.value.MediaLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Nut",value:"nut",disable:!e.value.NutService,empty:e.value.NutLog,logging:v,clear:c,restart:n,start:l,stop:i},{title:"Gogs",value:"gogs",disable:!e.value.GogsService,restart:n,start:l,stop:i},{title:"Postgres",value:"postgres",disable:!e.value.PostgresService,restart:n,start:l,stop:i}])}const ae=_({name:"PageServerMain",components:{UiBoxVue:B,MainTransmissionVue:z,MainSambaVue:Y,MainStorageVue:ee,DocockerServiceVue:T,ServerRebootVue:P},setup(){let e;const t={xl:5,lg:5,md:7,sm:11,xs:10},a=k({}),p=te(a),d=k(!0),S=U();return j(()=>{e=setInterval(()=>{S.loggedIn&&d.value&&(d.value=!1,J().then(s=>{a.value=s,d.value=!0}).catch(()=>d.value=!0))},1e3)}),N(()=>{clearTimeout(e)}),{state:a,boxCols:t,services:p,Reboot:I,Shutdown:F,handleClearAll(){for(let s of p.value)s!=null&&s.clear&&c(s.value)}}}});function se(e,t,a,p,d,S){const s=u("main-transmission-vue"),g=u("main-samba-vue"),r=u("main-storage-vue"),L=u("dococker-service-vue"),R=u("server-reboot-vue"),V=u("ui-box-vue");return y(),f(V,{columns:e.boxCols,header:"Main Server Management",buttonShow:!0,buttonLabel:"Clear All",buttonClick:e.handleClearAll,tooltip:"Clear all services log"},{default:$(()=>[o(q,null,{default:$(()=>[W("tbody",null,[o(s,{disable:!e.state.TransmissionService},null,8,["disable"]),o(g,{disable:!e.state.SambaService},null,8,["disable"]),o(r,{disable:!e.state.StorageService},null,8,["disable"]),(y(!0),E(D,null,G(e.services,m=>(y(),f(L,{key:m.value,value:m.value,title:m.title,disable:m.disable,"log-empty":m.empty,logging:m.logging,clear:m.clear,restart:m.restart,start:m.start,stop:m.stop},null,8,["value","title","disable","log-empty","logging","clear","restart","start","stop"]))),128)),o(R,{title:"Chatreey",reboot:e.Reboot,shutdown:e.Shutdown,disable:!e.state.WebService},null,8,["reboot","shutdown","disable"])])]),_:1})]),_:1},8,["columns","buttonClick"])}const ve=C(ae,[["render",se]]);export{ve as default};
