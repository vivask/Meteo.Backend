import{K as g,r as d,k,g as f,o as b,f as Q,L as s,M as t,aT as A,b0 as B,b2 as H,S as w,aS as E,b3 as I,c as L,aW as T,O as y,X as C,R as F,a6 as S,aQ as p,a7 as c}from"./vendor-7e3b54f2.js";import{b as x,Q as K,a as h}from"./QTable-f6f16d1c.js";import{U as N}from"./UiBox-438aefea.js";import{U as z}from"./UiRoundBtn-7ea8dd22.js";import{u as M}from"./useTableHandlers-649b36f2.js";import{Q as W}from"./QForm-dd93a313.js";import{U as q}from"./UiInput-ff5536f7.js";import{u as G}from"./useSubmitForm-841c2b76.js";import{g as R}from"./formsApi-edff0b5e.js";import{_ as V}from"./index-dc2fb6bd.js";import{u as O}from"./useUtils-85085a27.js";import{t as X}from"./tableWrapper-c43f1a46.js";import"./QMenu-7e13e904.js";import"./QTooltip-cd4ef32e.js";import"./QMarkupTable-3806441a.js";import"./QChip-dc1c4db6.js";import"./QItemLabel-0efd9dc5.js";import"./QItemSection-cefe5148.js";import"./format-3895543d.js";import"./useConfirmDialog-7754cf44.js";import"./jwtClient-fdc6c2bb.js";import"./NetworkError-b28af479.js";const j=g({name:"FormSshKey",components:{UiInputVue:q},emits:["cancel","submit"],setup(e,{emit:a}){const r=d(null),i=d([]),{localProp:m,show:u,handleSubmit:l,handleCancel:n}=G(r,a);return k(async()=>i.value=await R()),{localProp:m,popup:r,ssh_keys:i,show:u,handleSubmit:l,handleCancel:n}}});function J(e,a,r,i,m,u){const l=f("ui-input-vue");return b(),Q(I,{ref:"popup","transition-show":"rotate","transition-hide":"rotate",persistent:""},{default:s(()=>[t(E,{style:{"min-width":"350px"}},{default:s(()=>[t(A,null,{default:s(()=>[t(W,{class:"q-gutter-md",onSubmit:B(e.handleSubmit,["prevent"])},{default:s(()=>[t(l,{modelValue:e.localProp.host,"onUpdate:modelValue":a[0]||(a[0]=n=>e.localProp.host=n),hint:"Host Name/IP *",rule:"ip"},null,8,["modelValue"]),t(x,{modelValue:e.localProp.ssh_key,"onUpdate:modelValue":a[1]||(a[1]=n=>e.localProp.ssh_key=n),outlined:"",dense:"",options:e.ssh_keys,"option-label":"owner",hint:"Service *","lazy-rules":"",rules:[n=>n||"Please select something"]},null,8,["modelValue","options","rules"]),t(H,{align:"left",class:"text-primary"},{default:s(()=>[t(w,{label:"Submit",type:"submit",color:"primary"}),t(w,{label:"Cancel",color:"primary",flat:"",class:"q-ml-sm",onClick:e.handleCancel},null,8,["onClick"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},512)}const Y=V(j,[["render",J]]),Z="/sshclient/sshhosts";function ee(e){return X(Z,e)}const oe=[{name:"state"},{name:"icon"},{name:"host"},{name:"actions"}],te=g({name:"PageSshHosts",components:{UiBoxVue:N,UiRoundBtnVue:z,FormSshHostVue:Y},setup(){const e=d([]),a=ee(e),r=d(null),i={xl:5,lg:5,md:7,sm:11,xs:10},m=L(()=>e.value.length===0),u=d(!1),{handleAdd:l,handleEdit:n,handleSubmit:_,handleDelete:o,handleCancel:v}=M(u,r,e,a,{}),{formatLongDate:$,isEmptyTime:P,activeIcon:U,activeColor:D}=O();return k(async()=>{e.value=await a.Get(!0)}),T(async()=>{e.value=await a.Get(!1)}),{columns:oe,rows:e,buttonShow:m,wrapper:a,form:r,boxCols:i,visible:u,formatLongDate:$,isEmptyTime:P,activeIcon:U,activeColor:D,handleAdd:l,handleEdit:n,handleSubmit:_,handleDelete:o,handleCancel:v}}}),se={class:"text-subtitle1 text-bold text-left text-primary"},ae={class:"text-subtitle2 text-left"},ne={class:"text-subtitle2 text-left"},le={class:"text-meta text-left"},re={key:0,class:"text-meta text-left"};function ie(e,a,r,i,m,u){const l=f("ui-round-btn-vue"),n=f("ui-box-vue"),_=f("form-ssh-host-vue");return b(),y(F,null,[t(n,{columns:e.boxCols,header:"SSH hosts management",buttonShow:e.buttonShow,buttonLabel:"Add",buttonClick:e.handleAdd,tooltip:"Add new ssh host"},{default:s(()=>[t(K,{"hide-header":"",rows:e.rows,columns:e.columns,"row-key":"host","rows-per-page-options":[10,50,100,0]},{"body-cell-state":s(o=>[t(h,{props:o,class:"wd-20"},{default:s(()=>[t(S,{name:e.activeIcon(o.row.activity),size:"1.2rem",color:e.activeColor(o.row.activity)},null,8,["name","color"])]),_:2},1032,["props"])]),"body-cell-icon":s(o=>[t(h,{props:o,class:"wd-80"},{default:s(()=>[t(S,{name:"computer",size:"md"})]),_:2},1032,["props"])]),"body-cell-host":s(o=>[t(h,{props:o,class:"wd-100"},{default:s(()=>[p("div",se,c(o.row.host),1),p("div",ae,"Key: "+c(o.row.ssh_key.owner),1),p("div",ne,c(o.row.short_finger),1),p("div",le,"Created "+c(e.formatLongDate(o.row.created)),1),e.isEmptyTime(o.row.used)?C("",!0):(b(),y("div",re," Last used "+c(e.formatLongDate(o.row.used)),1))]),_:2},1032,["props"])]),"body-cell-actions":s(o=>[t(h,{props:o},{default:s(()=>[t(l,{color:"primary",icon:"add",tooltip:"Create ssh host",onClick:e.handleAdd},null,8,["onClick"]),t(l,{color:"positive",icon:"mode_edit",tooltip:"Edit ssh host",onClick:v=>e.handleEdit(o.row)},null,8,["onClick"]),t(l,{color:"negative",icon:"delete",tooltip:"Delete ssh host",onClick:v=>e.handleDelete(o.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1},8,["columns","buttonShow","buttonClick"]),e.visible?(b(),Q(_,{key:0,ref:"form",onSubmit:e.handleSubmit,onCancel:e.handleCancel},null,8,["onSubmit","onCancel"])):C("",!0)],64)}const Ae=V(te,[["render",ie],["__scopeId","data-v-ea9c5416"]]);export{Ae as default};
