import{j as c}from"./jwtClient-fdc6c2bb.js";const l={"/proxy/autovpn":[{"/proxy/ignorevpn":!0}],"/proxy/ignorevpn":[{"/proxy/autovpn":!0}],"/schedule/tasks":[{"/schedule/jobs":!0}],"/schedule/jobs":[{"/schedule/cron":!0}],"/sshclient/sshkeys":[{"/sshclient/sshhosts":!0},{"/sshclient/gitusers":!0}],"/radius/accounting/":[{"/radius/verified":!0}],"/radius/verified":[{"/radius/accounting":!0}],"/database/tables":[{"/database/sync":!0}]};function O(r,u){const d=async e=>!e&&!m(r)?u.value:await c.get(r).then(({success:t,result:n})=>t?(x(r),n):[]).catch(t=>(console.log("get error: ",t),[])),h=async e=>await c.put(r,e).then(({success:t,result:n})=>(t&&(e.id=n,u.value.push(e),o(r)),u.value)).catch(t=>(console.log("insert error: ",t),u.value)),v=async e=>await c.post(r,e).then(({success:t})=>{if(t){const n=u.value.findIndex(s=>s.id===e.id);u.value[n]=e,o(r)}return u.value}).catch(t=>(console.log("update error: ",t),u.value)),y=async e=>{const t=r+"/"+e.id;return c.delete(t,e).then(({success:n})=>(n&&o(r),i(e))).catch(n=>(console.log("delete error: ",n),u.value))},b=async e=>{const t=r+"/delete";return c.post(t,e).then(({success:n})=>(n&&o(r),i(e))).catch(n=>(console.log("delete error: ",n),u.value))},a=async e=>c.put(r,e).then(({success:t})=>(t&&o(r),i(e))).catch(t=>(console.log("ignore error: ",t),u.value)),j=async e=>await a(e),p=(e,t)=>{let n=t;return n.length==0&&n.push(e),n},i=e=>(e==null?void 0:e.length)>0?u.value.filter(t=>!e.includes(t)):u.value.filter(t=>t.id!==e.id);function o(e){if(l[e]!==void 0)for(let t of l[e])Object.keys(t).forEach(n=>{t[n]=!0})}function x(e){Object.values(l).forEach(t=>{for(let n of t)Object.keys(n).forEach(s=>{e===s&&(n[s]=!1)})})}function m(e){let t=!0;return Object.values(l).forEach(n=>{for(let s of n)Object.keys(s).forEach(f=>{e===f&&(t=s[f])})}),t}return{Get:d,Insert:h,Update:v,Delete:y,Ignore:a,Restore:j,Selected:p,BatchDelete:b}}export{O as t};
