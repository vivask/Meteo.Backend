import{a as c,c as n,b as u,N as l}from"./NetworkError-b28af479.js";import{b as d}from"./index-dc2fb6bd.js";const i=c.create({baseURL:"/api/v1",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"},validateStatus(t){return![408,413,429].includes(t)&&t<500}}),a=d();i.interceptors.request.use(t=>(t.method==="get"&&a.start(),t));i.interceptors.response.use(t=>{if(a.stop(),t.status>=400){const e=t.data.message??t.data??t.statusText;return a.fault(e),n({statusCode:t.status,message:e},t)}else return u(t.data.data,t)},t=>{var o;a.stop();const{response:e}=t,s=t.config,r=`[${s.method} ${s.url}] error: ${(o=e.data)==null?void 0:o.message}`||e.statusText;return a.fault(r),!t.response||t.code==="ECONNABORTED"?Promise.reject(new l(t.request)):Promise.reject(r)});export{i as w};
